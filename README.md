# NGX File Preview

ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ Angular æ–‡ä»¶é¢„è§ˆç»„ä»¶åº“ï¼Œæ”¯æŒå¤šç§æ–‡ä»¶æ ¼å¼çš„é¢„è§ˆï¼Œæä¾›çµæ´»çš„è‡ªå®šä¹‰é€‰é¡¹ã€‚

## é¢„è§ˆæ•ˆæœ

### é»˜è®¤åˆ—è¡¨è§†å›¾
![é»˜è®¤åˆ—è¡¨è§†å›¾](assets/readme/default-list.png)

### è‡ªå®šä¹‰æ¨¡æ¿(ä»…ç¤ºä¾‹,å¯è‡ªç”±å®šä¹‰)
![è‡ªå®šä¹‰æ¨¡æ¿](assets/readme/custom-template.png)

### å„ç±»å‹æ–‡ä»¶é¢„è§ˆæ•ˆæœ

| æ–‡ä»¶ç±»å‹ | é¢„è§ˆæ•ˆæœ                                                                                                    |
|---------|---------------------------------------------------------------------------------------------------------|
| å›¾ç‰‡é¢„è§ˆ | ![å›¾ç‰‡é¢„è§ˆ-dark](assets/readme/image-preview-dark.png) ![å›¾ç‰‡é¢„è§ˆ-light](assets/readme/image-preview-light.png) |
| è§†é¢‘é¢„è§ˆ | ![è§†é¢‘é¢„è§ˆ-dark](assets/readme/video-preview-dark.png) ![è§†é¢‘é¢„è§ˆ-light](assets/readme/video-preview-light.png) |
| éŸ³é¢‘é¢„è§ˆ | ![éŸ³é¢‘é¢„è§ˆ-dark](assets/readme/audio-preview-dark.png) ![éŸ³é¢‘é¢„è§ˆ-light](assets/readme/audio-preview-light.png) |
| PPTé¢„è§ˆ | ![PPTé¢„è§ˆ-dark](assets/readme/ppt-preview-dark.png) ![PPTé¢„è§ˆ-light](assets/readme/ppt-preview-light.png) |
| Wordé¢„è§ˆ | ![Wordé¢„è§ˆ-dark](assets/readme/word-preview-dark.png) ![Wordé¢„è§ˆ-light](assets/readme/word-preview-light.png) |
| Excelé¢„è§ˆ | ![Excelé¢„è§ˆ-dark](assets/readme/excel-preview-dark.png) ![Excelé¢„è§ˆ-light](assets/readme/excel-preview-light.png) |
| æ–‡æœ¬é¢„è§ˆ | ![æ–‡æœ¬é¢„è§ˆ-dark](assets/readme/text-preview-dark.png) ![æ–‡æœ¬é¢„è§ˆ-light](assets/readme/text-preview-light.png) |
| å‹ç¼©åŒ…é¢„è§ˆ | ![å‹ç¼©åŒ…é¢„è§ˆ-dark](assets/readme/zip-preview-dark.png) ![å‹ç¼©åŒ…é¢„è§ˆ-light](assets/readme/zip-preview-light.png) |
| æœªçŸ¥ç±»å‹ | ![æœªçŸ¥ç±»å‹-dark](assets/readme/unknown-preview-dark.png) ![æœªçŸ¥ç±»å‹-light](assets/readme/unknown-preview-light.png) |

## ç‰¹æ€§

ğŸ¯ æ”¯æŒå¤šç§æ–‡ä»¶æ ¼å¼é¢„è§ˆï¼šå…¨é¢å…¼å®¹å›¾ç‰‡ã€PDFã€PPTã€Wordã€æ–‡æœ¬ã€è§†é¢‘ç­‰å¸¸è§æ–‡ä»¶ç±»å‹ã€‚
ğŸ‘¬ğŸ» å‹å¥½çš„äº¤äº’ä½“éªŒï¼šæç¤ºæœªçŸ¥æ–‡ä»¶ç±»å‹ï¼Œå¯¹ä¸åŒçš„æ–‡ä»¶ç±»å‹æä¾›å‹å¥½çš„äº¤äº’æ“ä½œã€‚
ğŸ¨ æš—é»‘æ¨¡å¼ä¸æµ…è‰²æ¨¡å¼ï¼šæ»¡è¶³ä¸åŒä½¿ç”¨åœºæ™¯çš„è§†è§‰éœ€æ±‚ã€‚
ğŸ’ª å¤šæ ·åŒ–ä½¿ç”¨æ–¹å¼ï¼šåŒæ—¶æ”¯æŒæŒ‡ä»¤å¼å’Œç»„ä»¶å¼è°ƒç”¨ï¼Œçµæ´»é€‚é…å¼€å‘éœ€æ±‚ã€‚
ğŸš€ è½»é‡åŒ–è®¾è®¡ï¼šé«˜æ•ˆæ€§èƒ½ï¼Œè½»æ¾é›†æˆåˆ°å„ç±»é¡¹ç›®ä¸­ã€‚
âŒ¨ï¸ é”®ç›˜å¿«æ·æ“ä½œæ”¯æŒï¼šæå‡æ“ä½œæ•ˆç‡ï¼Œè®©ä½¿ç”¨æ›´åŠ é¡ºç•…ã€‚

## å®‰è£…
```bash
npm install @eternalheart/ngx-file-preview --save docx-preview hls.js ng2-pdf-viewer pptx-preview xlsx
```

## é…ç½®

### 1. å­—ä½“å›¾æ ‡é…ç½®

åœ¨ `angular.json` æ–‡ä»¶ä¸­æ·»åŠ å¿…è¦çš„æ ·å¼å’Œè„šæœ¬ï¼š

```json
{
  "projects": {
    "your-app": {
      "architect": {
        "build": {
          "options": {
            "styles": [
              "node_modules/@eternalheart/ngx-file-preview/src/assets/icon/font/nfp.css"
            ],
            "scripts": [
              "node_modules/@eternalheart/ngx-file-preview/src/assets/icon/color/nfp.js"
            ]
          }
        }
      }
    }
  }
}
```

### 2. æ¨¡å—å¯¼å…¥

åœ¨éœ€è¦ä½¿ç”¨çš„æ¨¡å—ä¸­å¯¼å…¥ç›¸å…³ç»„ä»¶ï¼š

```typescript
import { 
  PreviewDirective, 
  PreviewComponent, 
  PreviewModalComponent 
} from '@eternalheart/ngx-file-preview';

@Component({
  // ... å…¶ä»–é…ç½®
  imports: [
    PreviewDirective,
    PreviewComponent,
  ]
})
```

## ä½¿ç”¨æ–¹æ³•

### 1. æŒ‡ä»¤æ–¹å¼

æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼ï¼Œç›´æ¥åœ¨å…ƒç´ ä¸Šæ·»åŠ æŒ‡ä»¤ï¼š

```typescript
import {PreviewDirective,PreviewEvent} from '@eternalheart/ngx-file-preview';

@Component({
  imports: [PreviewDirective],
  template: `
    <!--å¯ä»¥é€šè¿‡themeModeæŒ‡å®šç»„ä»¶æ˜¾ç¤ºæš—é»‘æ¨¡å¼/æµ…è‰²æ¨¡å¼ é»˜è®¤æŒ‰æ—¶é—´è‡ªåŠ¨åˆ‡æ¢æ¨¡å¼ ä¹Ÿå¯ä»¥åœ¨é¢„è§ˆé¡µé¢å†…åˆ‡æ¢æ¨¡å¼ -->
    <!--æµ…è‰²æ¨¡å¼-->
    <div [ngxFilePreview]="file" themeMode="light">ç‚¹å‡»é¢„è§ˆå•ä¸ªæ–‡ä»¶</div>
    <!--æš—é»‘æ¨¡å¼-->
    <div [ngxFilePreview]="file" themeMode="dark" (previewEvent)="handlePreviewEvent($event)">ç‚¹å‡»é¢„è§ˆå•ä¸ªæ–‡ä»¶</div>
    <!--è‡ªåŠ¨åˆ‡æ¢ä¸»é¢˜(å¯ä»¥è‡ªå®šä¹‰åˆ‡æ¢æš—é»‘æ¨¡å¼çš„æ—¶é—´æ®µ)-->
    <div [ngxFilePreview]="file" themeMode="auto" [autoConfig]="{dark: {
    start: 19,
    end: 7
  }}">ç‚¹å‡»é¢„è§ˆå•ä¸ªæ–‡ä»¶</div>
    <!--é¢„è§ˆæ–‡ä»¶åˆ—è¡¨-->
    <div [ngxFilePreview]="files">ç‚¹å‡»é¢„è§ˆå¤šä¸ªæ–‡ä»¶</div>
  `
})
export class YourComponent {
  // æ”¯æŒå¤šç§æ–‡ä»¶ä¼ å…¥çš„æ–¹å¼
  // 1. å•ä¸ªæ–‡ä»¶æˆ–è€…æ–‡ä»¶åˆ—è¡¨éƒ½æ”¯æŒ
  // 2. åˆ—è¡¨æˆ–è€…æ–‡ä»¶çš„ç±»å‹æ”¯æŒ:æ–‡ä»¶åœ°å€/æ–‡ä»¶å¯¹è±¡/æ ‡å‡†PreviewFileå¯¹è±¡
  file: PreviewFile = {
    name: 'example.jpg',
    type: 'image',
    url: 'path/to/file.jpg'
  };
 
  files: PreviewFile[] = [
    // ... æ–‡ä»¶æ•°ç»„
  ];

  handlePreviewEvent(event: PreviewEvent) {
    const {type, message, event:targetEvent} = event;
    if(type==="error"){
      // ä¸€äº›æŠ¥é”™æç¤ºä¼šä»¥erroräº‹ä»¶ä¼ é€’å‡ºæ¥,å¦‚éæ³•æ“ä½œ
      console.log(message);
    }
    if(type==="select"){
      // é€‰ä¸­äº‹ä»¶ä¼šä»¥selectäº‹ä»¶ä¼ å‡º,event(å½“å‰åˆ«åtargetEvent)æ˜¯å¯¹åº”çš„æ–‡ä»¶å¯¹è±¡
      // æ³¨æ„: å¯èƒ½å’Œä¼ å…¥çš„åŸæ–‡ä»¶æˆ–è€…å¯¹è±¡ä¸åŒ è¿”å›çš„å¯¹è±¡ç±»å‹ä¸ºPreviewFile
      console.log(targetEvent);
    }
  }

}
```

### 2. ç»„ä»¶æ–¹å¼

#### ä½¿ç”¨é»˜è®¤åˆ—è¡¨æ¨¡æ¿ï¼š

```typescript
import { PreviewComponent } from '@eternalheart/ngx-file-preview';

@Component({
  imports: [PreviewComponent],
  template: `
    <!--ä¸»é¢˜åˆ‡æ¢ä¸æŒ‡ä»¤çš„è®¾ç½®æ–¹å¼ç›¸åŒ-->
    <ngx-file-preview 
      [files]="files"
      (fileSelect)="onFileSelect($event)">
    </ngx-file-preview>
  `
})
```

#### ä½¿ç”¨è‡ªå®šä¹‰æ¨¡æ¿ï¼š

```typescript
@Component({
  template: `
    <ngx-file-preview [files]="files">
      <ng-template #itemTemplate 
                   let-file 
                   let-index="index"
                   let-isActive="isActive"
                   let-preview="preview">
        <div class="custom-item" 
             [class.active]="isActive"
             (click)="preview()">
          <span>{{ file.name }}</span>
          <span>{{ formatFileSize(file.size) }}</span>
        </div>
      </ng-template>
    </ngx-file-preview>
  `
})
```

## æ–‡ä»¶é…ç½®

### PreviewFile æ¥å£
```typescript
interface PreviewFile {
  url: string;          // æ–‡ä»¶URL
  type: PreviewType;    // æ–‡ä»¶ç±»å‹
  name: string;         // æ–‡ä»¶å
  size?: number;        // æ–‡ä»¶å¤§å°ï¼ˆå¯é€‰ï¼‰
  lastModified?: number;// æœ€åä¿®æ”¹æ—¶é—´ï¼ˆå¯é€‰ï¼‰
  coverUrl?: string;    // å°é¢å›¾URLï¼ˆè§†é¢‘/éŸ³é¢‘å¯ç”¨ï¼Œå¯é€‰ï¼‰
}
```

### æ”¯æŒçš„æ–‡ä»¶ç±»å‹ (PreviewType)
```typescript
type PreviewType = 
  | 'image'   // å›¾ç‰‡
  | 'pdf'     // PDFæ–‡æ¡£
  | 'ppt'     // PPTæ¼”ç¤ºæ–‡ç¨¿
  | 'word'    // Wordæ–‡æ¡£
  | 'txt'     // æ–‡æœ¬æ–‡ä»¶
  | 'video'   // è§†é¢‘
  | 'excel'   // Excelè¡¨æ ¼
  | 'audio'   // éŸ³é¢‘
  | 'zip'     // å‹ç¼©åŒ…
  | 'unknown' // æœªçŸ¥ç±»å‹
```

## é”®ç›˜å¿«æ·é”®

é¢„è§ˆæ¨¡å¼ä¸‹æ”¯æŒä»¥ä¸‹å¿«æ·é”®ï¼š

- `â†` ä¸Šä¸€ä¸ªæ–‡ä»¶
- `â†’` ä¸‹ä¸€ä¸ªæ–‡ä»¶
- `Esc` å…³é—­é¢„è§ˆ

## å¼€å‘æŒ‡å—

1. å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/wh131462/ngx-file-preview.git
```

2. å®‰è£…ä¾èµ–
```bash
npm install
```

3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
npm run start
```

4. æ„å»ºåº“
```bash
npm run build
```

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Request æ¥å¸®åŠ©æ”¹è¿›è¿™ä¸ªé¡¹ç›®ï¼

## License

MIT

## é¸£è°¢

æœ¬é¡¹ç›®ä½¿ç”¨äº†ä»¥ä¸‹ä¼˜ç§€çš„å¼€æºé¡¹ç›®ï¼š

### æ–‡æ¡£é¢„è§ˆ
- [docx-preview](https://github.com/VolodymyrBaydalka/docx-preview) - Wordæ–‡æ¡£é¢„è§ˆ
- [pptx-preview](https://github.com/SheetJS/sheetjs) - PPTæ¼”ç¤ºæ–‡ç¨¿é¢„è§ˆ
- [xlsx](https://github.com/SheetJS/sheetjs) - Excelè¡¨æ ¼é¢„è§ˆ
- [ng2-pdf-viewer](https://github.com/VadimDez/ng2-pdf-viewer) - PDFæ–‡æ¡£é¢„è§ˆ

### åª’ä½“æ’­æ”¾
- [hls.js](https://github.com/video-dev/hls.js/) - HLSè§†é¢‘æµæ’­æ”¾æ”¯æŒ

æ„Ÿè°¢è¿™äº›é¡¹ç›®çš„è´¡çŒ®è€…ä»¬ä¸ºå¼€æºç¤¾åŒºä½œå‡ºçš„è´¡çŒ®ï¼

## ä¾èµ–è¯´æ˜

```json
{
  "dependencies": {
    "docx-preview": "^0.3.3",
    "hls.js": "^1.4.12",
    "ng2-pdf-viewer": "^10.0.0",
    "pptx-preview": "^1.0.1",
    "xlsx": "^0.18.5"
  }
}
```

è¿™äº›ä¾èµ–é¡¹éœ€è¦åœ¨å®‰è£… ngx-file-preview çš„æ—¶å€™åŒæ­¥å®‰è£…ã€‚å¦‚æœæ‚¨çš„é¡¹ç›®ä¸­å·²ç»åŒ…å«äº†æŸäº›ä¾èµ–ï¼Œå¯ä»¥æ ¹æ®éœ€è¦æ‰‹åŠ¨ç®¡ç†ç‰ˆæœ¬ã€‚
